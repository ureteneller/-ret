 <!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ãœreten Eller â€¢ Ana Sayfa</title>
  <meta name="description" content="Ãœreten Eller: El emeÄŸi Ã¼rÃ¼nler, yÃ¶resel lezzetler ve daha fazlasÄ±. Kategorilere gÃ¶z atÄ±n, arayÄ±n, ilan verin." />
  <link rel="icon" href="/assets/icons/favicon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:#0b1220;-webkit-font-smoothing:antialiased; /* --- FIX: mobile yatay kayma korumasÄ± --- */ overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    .page{min-height:100%;display:grid;grid-template-rows:auto 1fr auto}
    .topbar{position:sticky;top:0;z-index:40;backdrop-filter:saturate(140%) blur(8px);background:rgba(255,255,255,.8);border-bottom:1px solid #e5e7eb}
    .topbar-inner{max-width:1200px;margin:0 auto;padding:14px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between; /* MOBIL FIX */ min-width:0}
    .brand{display:flex;align-items:center;gap:10px; /* MOBIL FIX */ min-width:0;flex:1}
    .brand .logo{width:36px;height:36px;border-radius:10px;background:#000 url('/assets/icons/favicon.png') center/cover no-repeat;box-shadow:inset 0 0 0 1px rgba(255,255,255,.08)}
    .brand h1{font-size:18px;letter-spacing:.2px;margin:0;font-weight:800; /* MOBIL FIX */ white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:40vw}
    .actions{display:flex;align-items:center;gap:8px; /* MOBIL FIX */ flex:0 1 auto;flex-wrap:wrap;min-width:0}
    .btn{white-space:nowrap} /* MOBIL FIX: buton metinleri tek satÄ±r */
    .lang{display:flex;align-items:center;gap:6px;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;background:#fff}
    .lang select{border:0;background:transparent;font-weight:700; /* MOBIL FIX */ max-width:28ch}

    /* Ãœst kategori Ã§ipleri â€“ tÃ¼mÃ¼ yan yana, yatay kaydÄ±rmalÄ± */
    #catNav{border-top:1px solid #eee;border-bottom:1px solid #eee;background:#fff}
    .catnav-inner{max-width:1200px;margin:0 auto;padding:8px 16px;display:block;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch; /* --- FIX: mobilde hesaplÄ± scrollbar --- */ scrollbar-gutter:stable both-edges}
    .catnav .chip{display:inline-flex;align-items:center;gap:8px;margin-right:8px;border:1px solid #e5e7eb;border-radius:999px;padding:8px 12px;background:#fff;font-weight:700;cursor:pointer;white-space:nowrap}
    .catnav .chip:hover{background:#fafafa}
    .catnav .chip.active{color:#111;background:radial-gradient(120% 120% at 0% 0%, rgba(255,255,255,.75), transparent 35%),linear-gradient(180deg, #f7e7b5, #e8c972 40%, #d7b45d 55%, #caa552 80%, #b79343);border:1px solid #b18a37;box-shadow:inset 0 1px 0 rgba(255,255,255,.7), 0 4px 14px rgba(202,165,82,.3)}

    .catdrops{background:#fff}
    .catdrops-inner{max-width:1200px;margin:0 auto;padding:0 16px 8px}
    .catdrops .panel{display:none;border:1px solid #e5e7eb;border-radius:12px;padding:10px;margin:8px 0;background:#fff}
    .catdrops .panel.open{display:block}

    /* Hero */
    .hero{position:relative;border:1px solid #e5e7eb;border-radius:20px;padding:22px 18px;display:block;gap:20px;overflow:hidden;margin:16px auto;max-width:1200px}
    .hero::after{content:"";position:absolute;inset:-60% -40% auto auto;aspect-ratio:1/1;background:radial-gradient(closest-side,rgba(255,215,0,.15),transparent 70%);pointer-events:none}
    .cta-row{display:flex;flex-wrap:wrap;gap:8px}

    /* Buttons */
    .btn{--gold:#caa552;--shine:rgba(255,255,255,.7);--ink:#0b1220;appearance:none;border:0;cursor:pointer;font-weight:800;border-radius:12px;padding:10px 14px;position:relative;isolation:isolate;transition:transform .06s ease, box-shadow .2s ease;user-select:none}
    .btn:active{transform:translateY(1px)}
    .btn.gold{color:#111;background:radial-gradient(120% 120% at 0% 0%, rgba(255,255,255,.75), transparent 35%),linear-gradient(180deg, #f7e7b5, #e8c972 40%, #d7b45d 55%, #caa552 80%, #b79343);border:1px solid #b18a37;box-shadow:inset 0 1px 0 var(--shine), 0 4px 18px rgba(202,165,82,.35)}
    .btn.ghost{background:#fff;border:1px solid #e5e7eb}

    /* Auth badge */
    .auth-badge{display:flex;align-items:center;gap:10px;padding:6px 10px;border:1px solid #e5e7eb;border-radius:999px}
    .avatar{width:28px;height:28px;border-radius:50%;background:#f3f4f6;overflow:hidden}

  /* =========================
   MODAL (dialog) STÄ°LLERÄ°
   ========================= */
dialog.modal{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  background:rgba(0,0,0,.32);
  z-index:60;
  /* GÃ¼venli sÄ±nÄ±r: dialog kenar boÅŸluÄŸu taÅŸmasÄ±n */
  padding:0;
  overflow:hidden;
}
dialog[open].modal{ display:grid; }

.sheet{
  /* 96vw yerine 100vw: bazÄ± cihazlarda 1-2px taÅŸmayÄ± Ã¶nler */
  width:min(560px, 100vw);
  max-width:100vw;
  margin:0;
  background:#fff;
  border-radius:18px;
  border:1px solid #e5e7eb;
  box-shadow:0 30px 60px rgba(0,0,0,.15);
  overflow:hidden;
}
.sheet header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 14px;
  border-bottom:1px solid #eee;
}
.sheet header h3{ margin:0; font-size:18px; }
.sheet .inner{ padding:16px; }

.form{ display:grid; gap:10px; }
.row2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
@media (max-width:560px){ .row2{ grid-template-columns:1fr; } }

.input{ display:flex; flex-direction:column; gap:6px; }
.input label{ font-size:12px; color:#6b7280; }
.input input, .input select{
  border:1px solid #e5e7eb;
  border-radius:10px;
  padding:10px 12px;
  font-size:14px;
}

.pw{ position:relative; }
.pw input{ padding-right:38px; }
.pw .toggle{
  position:absolute; right:8px; top:50%;
  transform:translateY(-50%);
  border:0; background:transparent; cursor:pointer;
}

/* =========================
   FOOTER (LEGAL)
   ========================= */
.legal{ background:#000; color:#fff; }
.legal .inner{ max-width:1200px; margin:0 auto; padding:16px; }
.legal .row{ display:flex; justify-content:space-between; align-items:center; gap:12px; }
.legal .links{ display:flex; flex-wrap:wrap; gap:14px; align-items:center; }

/* =========================
   RESPONSIVE DOKUNUÅLAR
   ========================= */
@media (max-width:768px){
  .topbar-inner{ padding:12px 12px; }
  .catnav-inner{ padding:8px 12px; }
  .hero{ margin:12px 12px; padding:18px 14px; }

  /* SaÄŸ Ã¼st butonlar ezilmesin */
  .actions{ gap:6px; }

  /* Flex Ã§ocuklar taÅŸma yapmasÄ±n (kritik) */
  .topbar-inner, .brand, .actions{ min-width:0; }
}

/* Kart butonlarÄ± kÃ¼Ã§Ã¼k ekranda kÄ±rÄ±lÄ±p alta geÃ§sin */
.card .actions{ flex-wrap:wrap; }
.card .actions .btn{
  flex:1 1 100%;
  white-space:normal;
  min-width:0;
}
@media (min-width:481px){
  .card .actions .btn{ flex:1; }
}

/* Ãœst bar dil seÃ§icide olasÄ± taÅŸmalarÄ± Ã¶nle */
.actions{ min-width:0; }
.lang select{ max-width:100%; }

/* Ãœst bar iki satÄ±ra dÃ¼ÅŸebilsin */
@media (max-width:520px){
  .topbar-inner{ flex-wrap:wrap; }
  .actions{ flex-basis:100%; justify-content:flex-end; }
  .lang{ padding:6px 8px; }
}

/* 420px kuralÄ±: .hero h2 sabit font-size vermeyecek (override ile yÃ¶netilecek) */

  /* =========================
   Ä°LAN KARTLARI
   ========================= */
.listings-section{ max-width:1200px; margin:0 auto; padding:16px 12px; }

.listings-grid{
  display:grid;
  grid-template-columns:repeat(4, minmax(0,1fr));
  gap:12px;
  min-width:0;
}

.listings-head h3{ margin:0; font-size:18px; }

.card{
  border:1px solid #e5e7eb;
  border-radius:16px;
  overflow:hidden;
  background:#fff;
  display:flex;
  flex-direction:column;
  box-shadow:0 10px 30px rgba(0,0,0,.04);
  /* font-size satÄ±rÄ± kaldÄ±rÄ±ldÄ± */
}

.card .ph{
  position:relative;
  aspect-ratio:16/11;
  background:linear-gradient(180deg,#f3f4f6,#fff);
}

.card .body{ padding:12px; display:grid; gap:6px; }
.card .title{ font-weight:700; line-height:1.3; margin:0 0 4px; } /* font-size kaldÄ±rÄ±ldÄ± */
.price{ font-weight:900; } /* font-size kaldÄ±rÄ±ldÄ± */

.seller{ display:flex; gap:8px; align-items:center; }
.seller .av{ width:22px; height:22px; border-radius:50%; background:#eee; overflow:hidden; }
.seller .av img{ width:100%; height:100%; object-fit:cover; }
.seller .name{ font-size:12px; }

.badge{
  border:1px solid #10b981;
  color:#065f46;
  padding:2px 6px;
  border-radius:999px;
  background:#ecfdf5;
  margin-left:auto;
  /* font-size kaldÄ±rÄ±ldÄ± */
}

.card .actions{ display:flex; gap:8px; margin-top:8px; }
.card .actions .btn{ flex:1; }

.pill{
  display:inline-flex; align-items:center; gap:6px;
  border:1px solid #e5e7eb; border-radius:999px;
  padding:6px 10px; background:#fff;
  /* font-size kaldÄ±rÄ±ldÄ± */
}

.paging{ display:flex; gap:8px; justify-content:center; margin-top:12px; }

/* Showcase simgesi */
.ribbon{
  position:absolute; top:8px; left:8px;
  background:#caa552; color:#111; font-weight:900; font-size:11px;
  padding:4px 8px; border-radius:999px;
  border:1px solid #b18a37; box-shadow:0 4px 14px rgba(202,165,82,.25);
}

/* =========================
   BOYUT & DÃœZEN OVERRIDE
   (EN ALTA EKLEYÄ°N)
   ========================= */

/* Genel metin tabanÄ± */
html, body{ font-size:16px; line-height:1.5; }

/* Hero metinleri: daha bÃ¼yÃ¼k ve Ã§akÄ±ÅŸmalarÄ± bastÄ±r */
.hero h2{
  font-size:clamp(20px, 4.6vw, 28px) !important;
  line-height:1.22 !important;
}
.hero p{
  font-size:clamp(13px, 3.8vw, 16px) !important;
  line-height:1.5 !important;
}

/* Butonlar: okunaklÄ± */
.btn{ font-size:15px !important; padding:12px 16px !important; }

/* Kategori Ã§ipleri */
.catnav .chip{ font-size:15px !important; padding:9px 12px !important; }

/* Legal alan linkleri */
.legal .links a,
.legal .hint{ font-size:14px !important; }

/* Kart iÃ§i metinler */
.card .title{ font-size:16px !important; }
.card .desc{ font-size:13px !important; }
.price{ font-size:15px !important; }

/* KÃ¼Ã§Ã¼k rozet/pill biraz bÃ¼yÃ¼sÃ¼n */
.pill{ font-size:13px !important; }
.badge{ font-size:11px !important; }

/* Liste Ä±zgarasÄ± tek tanÄ±m (desktop 4, mobil 2) â€“ gÃ¼vence */
.listings-section .listings-grid{
  grid-template-columns:repeat(4, minmax(0,1fr)) !important;
  gap:12px !important;
}
@media (max-width:768px){
  .listings-section .listings-grid{
    grid-template-columns:repeat(2, minmax(0,1fr)) !important;
    gap:10px !important;
  }
}

  </style>
</head>
<body>
  <div class="page">
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <h1 data-i18n="app.name">Ãœreten Eller</h1>
        </div>
        <div class="actions">
          <div class="lang">
            <span>ğŸŒ</span>
            <select id="langSel" aria-label="Dil">
              <option value="tr" selected>TÃ¼rkÃ§e</option>
              <option value="en">English</option>
              <option value="de">Deutsch</option>
              <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            </select>
          </div>
          <button class="btn gold" id="postBtn" data-i18n="buttons.post">Ä°lan Ver</button>
          <div id="authArea" class="auth-badge" style="display:none">
            <div class="avatar"><img id="uAvatar" alt="" /></div>
            <div id="uName" class="hint">KullanÄ±cÄ±</div>
            <button class="btn ghost" id="signOutBtn" data-i18n="buttons.signout">Ã‡Ä±kÄ±ÅŸ</button>
          </div>
          <button class="btn ghost" id="signInBtn" data-i18n="buttons.signin">GiriÅŸ / KayÄ±t</button>
        </div>
      </div>

      <!-- Ãœstte Yatay Kategori Åeritleri (hepsi yan yana, kaydÄ±rmalÄ±) -->
      <nav id="catNav" class="catnav" aria-label="Kategoriler">
        <div class="catnav-inner"></div>
      </nav>
      <div id="catDrops" class="catdrops">
        <div class="catdrops-inner"></div>
      </div>
    </div>

    <main>
      <section class="content">
        <div class="hero">
          <h2 id="heroTitle" data-i18n="hero.title">El emeÄŸi & yerel lezzetler tek Ã§atÄ± altÄ±nda</h2>
          <p id="heroDesc" data-i18n="hero.desc">Ãœreten kadÄ±nlardan, ev yapÄ±mÄ± lezzetlerden, el iÅŸi tasarÄ±mlardan alÄ±ÅŸveriÅŸ yapÄ±n. Konumunuza gÃ¶re arayÄ±n, kategorilerden keÅŸfedin.</p>
          <div class="cta-row">
            <button class="btn gold" id="browseBtn" data-i18n="buttons.browse">Kategorileri KeÅŸfet</button>
          </div>
        </div>
      </section>

      <!-- === Ä°LANLAR === -->
      <section class="listings-section">
        <div class="listings-head">
          <h3>Yeni Ä°lanlar</h3>
          <div class="pill" id="listInfo">YÃ¼kleniyorâ€¦</div>
        </div>
        <div class="listings-grid" id="listGrid" aria-live="polite"></div>
        <div class="paging">
          <button class="btn ghost" id="prevPage" disabled>â€¹ Ã–nceki</button>
          <button class="btn ghost" id="nextPage" disabled>Sonraki â€º</button>
        </div>
      </section>
    </main>

    <footer class="legal">
      <div class="inner">
        <div class="row">
          <div class="links">
            <a href="/legal/kullanim-sartlari.html" data-i18n="legal.tos">KullanÄ±m ÅartlarÄ±</a>
            <a href="/legal/gizlilik-politikasi.html" data-i18n="legal.privacy">Gizlilik PolitikasÄ±</a>
            <a href="/legal/kvkk-aydinlatma.html" data-i18n="legal.kvkk">KVKK AydÄ±nlatma</a>
            <a href="/legal/topluluk-kurallari.html" data-i18n="legal.community">Topluluk KurallarÄ±</a>
            <a href="/legal/yasakli-urunler.html" data-i18n="legal.prohibited">YasaklÄ± ÃœrÃ¼nler</a>
            <a href="/legal/mesafeli-satis-sozlesmesi.html" data-i18n="legal.distance">Mesafeli SatÄ±ÅŸ</a>
            <a href="/legal/on-bilgilendirme-formu.html" data-i18n="legal.preinfo">Ã–n Bilgilendirme</a>
            <a href="/legal/teslimat-iade-iptal.html" data-i18n="legal.delivery">Teslimat/Ä°ade</a>
            <a href="/iletisim-impressum.html" data-i18n="legal.contact">Ä°letiÅŸim</a>
          </div>
          <div class="hint">Â© <span id="y"></span> <span data-i18n="app.name">Ãœreten Eller</span></div>
        </div>
      </div>
    </footer>
  </div>

  <!-- ===== Auth Modal ===== -->
  <dialog class="modal" id="authModal" aria-labelledby="authTitle">
    <div class="sheet">
      <header>
        <h3 id="authTitle" data-i18n="auth.title">GiriÅŸ Yap / KayÄ±t Ol</h3>
        <button class="btn ghost" data-close aria-label="Kapat">âœ•</button>
      </header>
      <div class="inner">
        <div class="form" style="margin-bottom:16px">
          <div class="input"><label for="li_email" data-i18n="fields.email">Eâ€‘posta</label><input id="li_email" type="email" placeholder="ornek@mail.com" autocomplete="username"/></div>
          <div class="input pw"><label for="li_pass" data-i18n="fields.password">Åifre</label><input id="li_pass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password"/><button class="toggle" data-toggle="li_pass" aria-label="Åifreyi gÃ¶ster">ğŸ‘ï¸</button></div>
          <div style="display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap">
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn gold" id="loginBtn" data-i18n="buttons.login">GiriÅŸ Yap</button>
              <button class="btn ghost" id="forgotBtn" type="button" data-i18n="buttons.forgot">Åifremi Unuttum</button>
            </div>
            <button class="btn gold" id="googleBtn" type="button" aria-label="Google" data-i18n="buttons.google">Google ile GiriÅŸ</button>
          </div>
        </div>
        <hr style="border:0;border-top:1px solid #eee;margin:8px 0 14px">
        <details>
          <summary style="cursor:pointer;font-weight:700" data-i18n="register.summary">HesabÄ±n yok mu? KayÄ±t ol</summary>
          <div class="form" style="margin-top:10px">
            <div class="row2">
              <div class="input"><label for="su_username" data-i18n="fields.username">KullanÄ±cÄ± AdÄ±</label><input id="su_username" maxlength="24" placeholder="@kullanici"/></div>
              <div class="input"><label for="su_name" data-i18n="fields.fullname">Ad Soyad</label><input id="su_name" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z"/></div>
            </div>
            <div class="row2">
              <div class="input"><label for="su_province" data-i18n="fields.province">Ä°l</label>
                <select id="su_province"></select>
              </div>
              <div class="input"><label for="su_district" data-i18n="fields.district">Ä°lÃ§e</label><input id="su_district" placeholder="Ä°lÃ§eniz"/></div>
            </div>
            <div class="row2">
              <div class="input"><label for="su_email" data-i18n="fields.email">Eâ€‘posta</label><input id="su_email" type="email" placeholder="ornek@mail.com" autocomplete="email"/></div>
              <div class="input pw"><label for="su_pass" data-i18n="fields.password">Åifre</label><input id="su_pass" type="password" placeholder="En az 6 karakter" autocomplete="new-password"/><button class="toggle" data-toggle="su_pass" aria-label="Åifreyi gÃ¶ster">ğŸ‘ï¸</button></div>
            </div>
            <div class="input pw"><label for="su_pass2" data-i18n="fields.password2">Åifre (Tekrar)</label><input id="su_pass2" type="password" placeholder="Åifreyi tekrar yazÄ±n" autocomplete="new-password"/><button class="toggle" data-toggle="su_pass2" aria-label="Åifreyi gÃ¶ster">ğŸ‘ï¸</button></div>
            <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
              <button class="btn gold" id="registerBtn" data-i18n="buttons.register">KayÄ±t Ol</button>
              <div class="hint" data-i18n="hints.verify">KayÄ±tla birlikte <strong>mail doÄŸrulama</strong> gÃ¶nderilir. Gelen kutusu ve <strong>SPAM</strong> klasÃ¶rÃ¼nÃ¼ kontrol edin.</div>
            </div>
          </div>
        </details>
      </div>
    </div>
  </dialog>

  <!-- ===== Listing Detail Modal ===== -->
  <dialog class="modal" id="listingModal" aria-labelledby="listingTitle">
    <div class="sheet">
      <header>
        <h3 id="listingTitle">Ä°lan DetayÄ±</h3>
        <button class="btn ghost" data-close-listing aria-label="Kapat">âœ•</button>
      </header>
      <div class="inner" id="listingBody">
        <!-- JS ile doldurulacak -->
      </div>
    </div>
  </dialog>

  <!-- Firebase init (kÃ¶kten) -->
  <script type="module" src="/firebase-init.js"></script>

  <script type="module">
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, createUserWithEmailAndPassword, sendEmailVerification, updateProfile, sendPasswordResetEmail, signOut } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js';

    // ===== i18n â€“ Metinler =====
    const I18N = {
      tr: {
        'app.name':'Ãœreten Eller',
        'buttons.post':'Ä°lan Ver','buttons.signin':'GiriÅŸ / KayÄ±t','buttons.signout':'Ã‡Ä±kÄ±ÅŸ','buttons.browse':'Kategorileri KeÅŸfet','buttons.login':'GiriÅŸ Yap','buttons.forgot':'Åifremi Unuttum','buttons.google':'Google ile GiriÅŸ','buttons.register':'KayÄ±t Ol',
        'hero.title':'El emeÄŸi & yerel lezzetler tek Ã§atÄ± altÄ±nda',
        'hero.desc':'Ãœreten kadÄ±nlardan, ev yapÄ±mÄ± lezzetlerden, el iÅŸi tasarÄ±mlardan alÄ±ÅŸveriÅŸ yapÄ±n. Konumunuza gÃ¶re arayÄ±n, kategorilerden keÅŸfedin.',
        'auth.title':'GiriÅŸ Yap / KayÄ±t Ol',
        'fields.email':'Eâ€‘posta','fields.password':'Åifre','fields.password2':'Åifre (Tekrar)','fields.username':'KullanÄ±cÄ± AdÄ±','fields.fullname':'Ad Soyad','fields.province':'Ä°l','fields.district':'Ä°lÃ§e',
        'register.summary':'HesabÄ±n yok mu? KayÄ±t ol',
        'hints.verify':'KayÄ±tla birlikte <strong>mail doÄŸrulama</strong> gÃ¶nderilir. Gelen kutusu ve <strong>SPAM</strong> klasÃ¶rÃ¼nÃ¼ kontrol edin.',
        'legal.tos':'KullanÄ±m ÅartlarÄ±','legal.privacy':'Gizlilik PolitikasÄ±','legal.kvkk':'KVKK AydÄ±nlatma','legal.community':'Topluluk KurallarÄ±','legal.prohibited':'YasaklÄ± ÃœrÃ¼nler','legal.distance':'Mesafeli SatÄ±ÅŸ','legal.preinfo':'Ã–n Bilgilendirme','legal.delivery':'Teslimat/Ä°ade','legal.contact':'Ä°letiÅŸim'
      },
      en: {
        'app.name':'Productive Hands',
        'buttons.post':'Post an Ad','buttons.signin':'Sign in / Register','buttons.signout':'Sign out','buttons.browse':'Browse Categories','buttons.login':'Sign In','buttons.forgot':'Forgot Password','buttons.google':'Sign in with Google','buttons.register':'Register',
        'hero.title':'Handmade & local tastes under one roof',
        'hero.desc':'Shop from women producers: homemade foods and handmade designs. Search by your location or explore by categories.',
        'auth.title':'Sign In / Register',
        'fields.email':'Email','fields.password':'Password','fields.password2':'Password (Again)','fields.username':'Username','fields.fullname':'Full Name','fields.province':'Province','fields.district':'District',
        'register.summary':'No account? Create one',
        'hints.verify':'A <strong>verification email</strong> will be sent. Check your inbox and <strong>SPAM</strong> folder.',
        'legal.tos':'Terms of Use','legal.privacy':'Privacy Policy','legal.kvkk':'KVKK Notice','legal.community':'Community Rules','legal.prohibited':'Prohibited Items','legal.distance':'Distance Sales','legal.preinfo':'Pre-Information','legal.delivery':'Delivery/Return','legal.contact':'Contact'
      },
      de: {
        'app.name':'FleiÃŸige HÃ¤nde',
        'buttons.post':'Anzeige aufgeben','buttons.signin':'Anmelden / Registrieren','buttons.signout':'Abmelden','buttons.browse':'Kategorien entdecken','buttons.login':'Anmelden','buttons.forgot':'Passwort vergessen','buttons.google':'Mit Google anmelden','buttons.register':'Registrieren',
        'hero.title':'Handgemachtes & lokale KÃ¶stlichkeiten unter einem Dach',
        'hero.desc':'Einkaufen bei Produzentinnen: Hausgemachtes und Handarbeiten. Nach Standort suchen oder Kategorien entdecken.',
        'auth.title':'Anmelden / Registrieren',
        'fields.email':'Eâ€‘Mail','fields.password':'Passwort','fields.password2':'Passwort (erneut)','fields.username':'Benutzername','fields.fullname':'VollstÃ¤ndiger Name','fields.province':'Provinz','fields.district':'Bezirk',
        'register.summary':'Kein Konto? Jetzt registrieren',
        'hints.verify':'Eine <strong>BestÃ¤tigungsâ€‘Eâ€‘Mail</strong> wird gesendet. Posteingang und <strong>SPAM</strong> prÃ¼fen.',
        'legal.tos':'Nutzungsbedingungen','legal.privacy':'Datenschutz','legal.kvkk':'KVKK Hinweis','legal.community':'Communityâ€‘Regeln','legal.prohibited':'Verbotene Artikel','legal.distance':'Fernabsatz','legal.preinfo':'Vorabâ€‘Information','legal.delivery':'Lieferung/RÃ¼ckgabe','legal.contact':'Kontakt'
      },
      ar: {
        'app.name':'Ø§Ù„Ø£ÙŠØ§Ø¯ÙŠ Ø§Ù„Ù…ÙÙ†ØªÙØ¬Ø©',
        'buttons.post':'Ø£Ù†Ø´Ø¦ Ø¥Ø¹Ù„Ø§Ù†Ù‹Ø§','buttons.signin':'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨','buttons.signout':'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬','buttons.browse':'Ø§Ø³ØªÙƒØ´Ù Ø§Ù„ÙØ¦Ø§Øª','buttons.login':'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„','buttons.forgot':'Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±','buttons.google':'Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google','buttons.register':'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
        'hero.title':'Ù…Ù†ØªØ¬Ø§Øª ÙŠØ¯ÙˆÙŠØ© ÙˆÙ†ÙƒÙ‡Ø§Øª Ù…Ø­Ù„ÙŠØ© ØªØ­Øª Ø³Ù‚Ù ÙˆØ§Ø­Ø¯',
        'hero.desc':'ØªØ³ÙˆÙ‘Ù‚ Ù…Ù† Ø§Ù„Ø³ÙŠÙ‘Ø¯Ø§Øª Ø§Ù„Ù…ÙÙ†ØªÙØ¬Ø§Øª: Ø£Ø·Ø¹Ù…Ø© Ù…Ù†Ø²Ù„ÙŠØ© ÙˆØ£Ø¹Ù…Ø§Ù„ ÙŠØ¯ÙˆÙŠØ©. Ø§Ø¨Ø­Ø« Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ Ø£Ùˆ Ø§Ø³ØªÙƒØ´Ù Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª.',
        'auth.title':'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
        'fields.email':'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ','fields.password':'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±','fields.password2':'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±','fields.username':'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…','fields.fullname':'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„','fields.province':'Ø§Ù„ÙˆÙ„Ø§ÙŠØ©','fields.district':'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©',
        'register.summary':'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¢Ù†',
        'hints.verify':'Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ <strong>Ø±Ø³Ø§Ù„Ø© ØªÙØ¹ÙŠÙ„</strong>. ÙŠØ±Ø¬Ù‰ ÙØ­Øµ Ø§Ù„ÙˆØ§Ø±Ø¯ Ùˆ<strong>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨Ø©</strong>.',
        'legal.tos':'Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…','legal.privacy':'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©','legal.kvkk':'Ø¥Ø´Ø¹Ø§Ø± KVKK','legal.community':'Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹','legal.prohibited':'Ø§Ù„Ø³Ù„Ø¹ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±Ø©','legal.distance':'Ø§Ù„Ø¨ÙŠØ¹ Ø¹Ù† Ø¨Ø¹Ø¯','legal.preinfo':'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙˆÙ„ÙŠØ©','Ø§Ù„ØªØ³Ù„ÙŠÙ…/Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹':'Ø§Ù„ØªØ³Ù„ÙŠÙ…/Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹','legal.contact':'Ø§Ù„ØªÙˆØ§ØµÙ„'
      }
    };

    // ===== i18n â€“ Kategori/SousÃ¶zlÃ¼kleri =====
    const CAT_I18N = {
      tr: {
        titles: {
          yemek:'ğŸ² Yemekler', pasta:'ğŸ‚ Pasta & TatlÄ±', sos:'ğŸ«™ ReÃ§el â€¢ TurÅŸu â€¢ Sos', yoresel:'ğŸŒ¾ YÃ¶resel / KÄ±ÅŸlÄ±k',
          diet:'ğŸ¥— Diyet / Vegan / GF', taki:'ğŸ’ TakÄ±', bebek:'ğŸ‘¶ Bebek & Ã‡ocuk', orgu:'ğŸ§¶ Ã–rgÃ¼ / Triko',
          terzi:'âœ‚ï¸ DikiÅŸ / Terzilik', makrome:'ğŸ§µ Makrome & Dekor', evdekor:'ğŸ  Ev Dekor & Aksesuar',
          mum:'ğŸ•¯ï¸ Mum & Kokulu', kozmetik:'ğŸ§¼ DoÄŸal Sabun & Kozmetik', amigurumi:'ğŸ§¸ Amigurumi & Oyuncak'
        },
        subs: {
          evyemek:'Ev yemekleri', borek:'BÃ¶rek-Ã§Ã¶rek', corba:'Ã‡orba', zeytiny:'ZeytinyaÄŸlÄ±', pilav:'Pilav-makarna', et:'Et-tavuk', kahvalti:'KahvaltÄ±lÄ±k', meze:'Meze', dondur:'DondurulmuÅŸ', cocuk:'Ã‡ocuk Ã¶ÄŸÃ¼nleri', diyetvegf:'Diyet/vegan/gf',
          yaspasta:'YaÅŸ pasta', kek:'Kek-cupcake', kurabiye:'Kurabiye', serbetli:'Åerbetli', sutlu:'SÃ¼tlÃ¼', cheese:'Cheesecake', diyettat:'Diyet tatlÄ±', cikolata:'Ã‡ikolata/ÅŸekerleme', dogumset:'DoÄŸum gÃ¼nÃ¼ setleri',
          recel:'ReÃ§el-marmelat', pekmez:'Pekmez', tursu:'TurÅŸu', dom:'Domates/biber sos', acios:'AcÄ± sos', salca:'SalÃ§a', sirke:'Sirke', konserve:'Konserve',
          eriste:'EriÅŸte', tarhana:'Tarhana', yufka:'Yufka', manti:'MantÄ±', kurut:'KurutulmuÅŸ', salca2:'SalÃ§a', sirke2:'Sirke', konserve2:'Konserve',
          fit:'Fit tabaklar', vegan:'Vegan yemekler', gf:'GF unlu mamuller', sekersiz:'Åekersiz tatlÄ±', keto:'Keto Ã¼rÃ¼n', protein:'Protein atÄ±ÅŸtÄ±rmalÄ±k',
          bileklik:'Bileklik', kolye:'Kolye', kupe:'KÃ¼pe', yuzuk:'YÃ¼zÃ¼k', halhal:'Halhal', bros:'BroÅŸ', set:'Setler', isimli:'KiÅŸiye Ã¶zel', makrome:'Makrome', dogaltas:'DoÄŸal taÅŸ', recine:'ReÃ§ine', telsarma:'Tel sarma',
          fig:'FigÃ¼rler', cingirak:'Ã‡Ä±ngÄ±rak', dis:'DiÅŸ kaÅŸÄ±yÄ±cÄ±', bezoy:'Bez oyuncak/kitap', montessori:'Montessori', set2:'Setler', patik:'Patik-bere', battaniye:'Battaniye', onluk:'Ã–nlÃ¼k', lohusa:'Lohusa seti', sac:'SaÃ§ aksesuarÄ±', giyim:'El emeÄŸi kÄ±yafet',
          hirka:'HÄ±rka', kazak:'Kazak', atkibere:'AtkÄ±-bere', panco:'PanÃ§o', sal:'Åal', corap:'Ã‡orap', lif:'Lif takÄ±mÄ±', bebektk:'Bebek takÄ±mÄ±', yelek:'Yelek', kirlen:'KÄ±rlent-Ã¶rtÃ¼', igneoyasi:'Ä°ÄŸne oyasÄ±',
          paca:'PaÃ§a/onarÄ±m', fermuar:'Fermuar deÄŸiÅŸimi', perde:'Perde', nevresim:'Nevresim', masa:'Masa Ã¶rtÃ¼sÃ¼', ozel:'Ã–zel dikim', kostum:'KostÃ¼m',
          duvar:'Duvar sÃ¼sÃ¼', saksi:'SaksÄ± askÄ±sÄ±', anahtar:'AnahtarlÄ±k', avize:'Avize', runner:'Runner', sepet:'Sepet', raf:'Raf/dekor',
          kece:'KeÃ§e iÅŸleri', kirlent:'KÄ±rlent', kapi:'KapÄ± sÃ¼sÃ¼', tepsi:'Tepsi sÃ¼s', cerceve:'Ã‡erÃ§eve', ruya:'RÃ¼ya kapanÄ±', tablo:'Tablo',
          soya:'Soya/balmumu', tas:'Kokulu taÅŸ', sprey:'Oda spreyi', tutsu:'TÃ¼tsÃ¼', jel:'Jel mum', hediye:'Hediye seti',
          zeytin:'ZeytinyaÄŸlÄ± sabun', bitkisel:'Bitkisel sabun', sampuan:'KatÄ± ÅŸampuan', balm:'Dudak balmÄ±', krem:'Krem/merhem', banyotuzu:'Banyo tuzu', lavanta:'Lavanta kesesi',
          anahtar2:'AnahtarlÄ±k', magnet:'Magnet', kolek:'Koleksiyon', dekorbebek:'Dekor bebek'
        }
      },
      en: {
        titles: {
          yemek:'ğŸ² Meals', pasta:'ğŸ‚ Cakes & Sweets', sos:'ğŸ«™ Jam â€¢ Pickles â€¢ Sauces', yoresel:'ğŸŒ¾ Local / Pantry',
          diet:'ğŸ¥— Diet / Vegan / GF', taki:'ğŸ’ Jewelry', bebek:'ğŸ‘¶ Baby & Kids', orgu:'ğŸ§¶ Knitwear',
          terzi:'âœ‚ï¸ Sewing / Tailor', makrome:'ğŸ§µ MacramÃ© & Decor', evdekor:'ğŸ  Home Decor & Accessories',
          mum:'ğŸ•¯ï¸ Candles & Fragrance', kozmetik:'ğŸ§¼ Natural Soap & Cosmetics', amigurumi:'ğŸ§¸ Amigurumi & Toys'
        },
        subs: {
          evyemek:'Home-cooked meals', borek:'BÃ¶rek & pastries', corba:'Soup', zeytiny:'Olive-oil dishes', pilav:'Rice & pasta', et:'Meat & chicken', kahvalti:'Breakfast items', meze:'Meze', dondur:'Frozen', cocuk:'Kids meals', diyetvegf:'Diet/vegan/gf',
          yaspasta:'Cream cakes', kek:'Cake & cupcake', kurabiye:'Cookies', serbetli:'Syrupy desserts', sutlu:'Milk desserts', cheese:'Cheesecake', diyettat:'Diet desserts', cikolata:'Chocolate/candy', dogumset:'Birthday sets',
          recel:'Jam & marmalade', pekmez:'Molasses', tursu:'Pickles', dom:'Tomato/pepper sauce', acios:'Hot sauce', salca:'Paste', sirke:'Vinegar', konserve:'Canned',
          eriste:'Noodles (eriÅŸte)', tarhana:'Tarhana', yufka:'Yufka', manti:'MantÄ±', kurut:'Dried foods', salca2:'Paste', sirke2:'Vinegar', konserve2:'Canned',
          fit:'Fit plates', vegan:'Vegan dishes', gf:'Glutenâ€‘free bakery', sekersiz:'Sugarâ€‘free desserts', keto:'Keto products', protein:'Protein snacks',
          bileklik:'Bracelet', kolye:'Necklace', kupe:'Earrings', yuzuk:'Ring', halhal:'Anklet', bros:'Brooch', set:'Sets', isimli:'Personalized', makrome:'MacramÃ©', dogaltas:'Gemstone', recine:'Resin', telsarma:'Wire wrap',
          fig:'Figures', cingirak:'Rattle', dis:'Teether', bezoy:'Cloth toy/book', montessori:'Montessori', set2:'Sets', patik:'Booties & beanie', battaniye:'Blanket', onluk:'Bib', lohusa:'Maternity set', sac:'Hair accessory', giyim:'Handmade clothing',
          hirka:'Cardigan', kazak:'Sweater', atkibere:'Scarf & beanie', panco:'Poncho', sal:'Shawl', corap:'Socks', lif:'Bath mitt set', bebektk:'Baby set', yelek:'Vest', kirlen:'Cushion/cover', igneoyasi:'Needle lace',
          paca:'Hem/repair', fermuar:'Zipper change', perde:'Curtain', nevresim:'Duvet set', masa:'Tablecloth', ozel:'Custom tailoring', kostum:'Costume',
          duvar:'Wall hanging', saksi:'Plant hanger', anahtar:'Keychain', avize:'Chandelier', runner:'Runner', sepet:'Basket', raf:'Shelf/decor',
          kece:'Felt crafts', kirlent:'Cushion', kapi:'Door wreath', tepsi:'Tray decor', cerceve:'Frame', ruya:'Dreamcatcher', tablo:'Painting',
          soya:'Soy/beeswax', tas:'Aroma stone', sprey:'Room spray', tutsu:'Incense', jel:'Gel candle', hediye:'Gift set',
          zeytin:'Olive oil soap', bitkisel:'Herbal soap', sampuan:'Solid shampoo', balm:'Lip balm', krem:'Cream/ointment', banyotuzu:'Bath salt', lavanta:'Lavender sachet',
          anahtar2:'Keychain', magnet:'Magnet', kolek:'Collection', dekorbebek:'Decor doll'
        }
      },
      de: {
        titles: {
          yemek:'ğŸ² Gerichte', pasta:'ğŸ‚ Kuchen & SÃ¼ÃŸes', sos:'ğŸ«™ Marmelade â€¢ Pickles â€¢ SoÃŸen', yoresel:'ğŸŒ¾ Regional / Vorrat',
          diet:'ğŸ¥— DiÃ¤t / Vegan / GF', taki:'ğŸ’ Schmuck', bebek:'ğŸ‘¶ Baby & Kinder', orgu:'ğŸ§¶ Strick',
        "terzi":"âœ‚ï¸ NÃ¤hen / Schneiderei", "makrome":"ğŸ§µ Makramee & Deko", "evdekor":"ğŸ  Wohndeko & Accessoires",
          mum:'ğŸ•¯ï¸ Kerzen & DÃ¼fte', kozmetik:'ğŸ§¼ Naturseife & Kosmetik', amigurumi:'ğŸ§¸ Amigurumi & Spielzeug'
        },
        subs: {
          evyemek:'Hausmannskost', borek:'BÃ¶rek & GebÃ¤ck', corba:'Suppe', zeytiny:'OlivenÃ¶ldgerichte', pilav:'Reis & Pasta', et:'Fleisch & Huhn', kahvalti:'FrÃ¼hstÃ¼ck', meze:'Meze', dondur:'TiefgekÃ¼hlt', cocuk:'Kindermahlzeiten', diyetvegf:'DiÃ¤t/vegan/gf',
          yaspasta:'Sahnetorten', kek:'Kuchen & Cupcake', kurabiye:'Kekse', serbetli:'Sirupâ€‘Desserts', sutlu:'Milchdesserts', cheese:'KÃ¤sekuchen', diyettat:'DiÃ¤tâ€‘Desserts', cikolata:'Schokolade/SÃ¼ÃŸwaren', dogumset:'Geburtstagsâ€‘Sets',
          recel:'Marmelade', pekmez:'Melasse', tursu:'Eingelegtes', dom:'Tomaten/Paprikaâ€‘SoÃŸe', acios:'Scharfe SoÃŸe', salca:'Mark', sirke:'Essig', konserve:'Konserven',
          eriste:'EriÅŸteâ€‘Nudeln', tarhana:'Tarhana', yufka:'Yufka', manti:'MantÄ±', kurut:'Getrocknetes', salca2:'Mark', sirke2:'Essig', konserve2:'Konserven',
          fit:'Fitâ€‘Teller', vegan:'Vegane Gerichte', gf:'Glutenfreie Backwaren', sekersiz:'Zuckerfreie Desserts', keto:'Ketoâ€‘Produkte', protein:'Proteinâ€‘Snacks',
          bileklik:'Armband', kolye:'Kette', kupe:'Ohrringe', yuzuk:'Ring', halhal:'FuÃŸkettchen', bros:'Brosche', set:'Sets', isimli:'Personalisiert', makrome:'Makramee', dogaltas:'Edelstein', recine:'Harz', telsarma:'Drahtwicklung',
          fig:'Figuren', cingirak:'Rassel', dis:'BeiÃŸring', bezoy:'Stoffspielzeug/Buch', montessori:'Montessori', set2:'Sets', patik:'SchÃ¼hchen & MÃ¼tze', battaniye:'Decke', onluk:'LÃ¤tzchen', lohusa:'Wochenbettâ€‘Set', sac:'Haaraccessoire', giyim:'Handgemachte Kleidung',
          hirka:'Cardigan', kazak:'Pullover', atkibere:'Schal & MÃ¼tze', panco:'Poncho', sal:'Tuch', corap:'Socken', lif:'Badeset', bebektk:'Babyâ€‘Set', yelek:'Weste', kirlen:'Kissen/Decke', igneoyasi:'Nadelspitze',
          paca:'Saum/Reparatur', fermuar:'ReiÃŸverschlusswechsel', perde:'Vorhang', nevresim:'BettwÃ¤scheâ€‘Set', masa:'Tischdecke', ozel:'MaÃŸanfertigung', kostum:'KostÃ¼m',
          duvar:'Wanddeko', saksi:'PflanzenhÃ¤nger', anahtar:'SchlÃ¼sselanhÃ¤nger', avize:'Krone/Leuchte', runner:'LÃ¤ufer', sepet:'Korb', raf:'Regal/Deko',
          kece:'Filzarbeiten', kirlent:'Kissen', kapi:'TÃ¼rkranz', tepsi:'Tablettâ€‘Deko', cerceve:'Rahmen', ruya:'TraumfÃ¤nger', tablo:'Bild',
          soya:'Soja/Bienenwachs', tas:'Duftstein', sprey:'Raumspray', tutsu:'Weihrauch', jel:'Gelkerze', hediye:'Geschenkset',
          zeytin:'OlivenÃ¶lseife', bitkisel:'KrÃ¤uterseife', sampuan:'Festes Shampoo', balm:'Lippenbalsam', krem:'Creme/Salbe', banyotuzu:'Badesalz', lavanta:'LavendelsÃ¤ckchen',
          anahtar2:'SchlÃ¼sselanhÃ¤nger', magnet:'Magnet', kolek:'Sammlung', dekorbebek:'Dekoâ€‘Puppe'
        }
      },
      ar: {
        titles: {
          yemek:'ğŸ² ÙˆØ¬Ø¨Ø§Øª', pasta:'ğŸ‚ ÙƒØ¹ÙƒØ§Øª ÙˆØ­Ù„ÙˆÙŠØ§Øª', sos:'ğŸ«™ Ù…Ø±Ø¨Ù‘Ù‰ â€¢ Ù…Ø®Ù„Ù„Ø§Øª â€¢ ØµÙ„ØµØ§Øª', yoresel:'ğŸŒ¾ Ù…Ø­Ù„ÙŠ / Ù…Ø¤ÙˆÙ†Ø©',
          diet:'ğŸ¥— Ø­Ù…ÙŠØ© / Ù†Ø¨Ø§ØªÙŠ / Ø®Ø§Ù„Ù Ù…Ù† Ø§Ù„ØºÙ„ÙˆØªÙŠÙ†', taki:'ğŸ’ Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª', bebek:'ğŸ‘¶ Ø£Ø·ÙØ§Ù„ ÙˆØ±Ø¶Ù‘Ø¹', orgu:'ğŸ§¶ Ø­ÙŠØ§ÙƒØ©',
          terzi:'âœ‚ï¸ Ø®ÙŠØ§Ø·Ø© / ØªÙØµÙŠÙ„', makrome:'ğŸ§µ Ù…ÙƒØ±Ù…ÙŠØ© ÙˆØ¯ÙŠÙƒÙˆØ±', evdekor:'ğŸ  Ø¯ÙŠÙƒÙˆØ± Ù…Ù†Ø²Ù„ÙŠ ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª',
          mum:'ğŸ•¯ï¸ Ø´Ù…ÙˆØ¹ ÙˆØ±ÙˆØ§Ø¦Ø­', kozmetik:'ğŸ§¼ ØµØ§Ø¨ÙˆÙ† Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…Ø³ØªØ­Ø¶Ø±Ø§Øª', amigurumi:'ğŸ§¸ Ø£Ù…ÙŠØºÙˆØ±ÙˆÙ…ÙŠ ÙˆØ£Ù„Ø¹Ø§Ø¨'
        },
        subs: {
          evyemek:'Ø£Ø·Ø¨Ø§Ù‚ Ù…Ù†Ø²Ù„ÙŠØ©', borek:'Ø¨ÙˆØ±Ùƒ ÙˆÙ…Ø¹Ø¬Ù‘Ù†Ø§Øª', corba:'Ø´ÙˆØ±Ø¨Ø©', zeytiny:'Ø£Ø·Ø¨Ø§Ù‚ Ø¨Ø²ÙŠØª Ø§Ù„Ø²ÙŠØªÙˆÙ†', pilav:'Ø£Ø±Ø² ÙˆÙ…ÙƒØ±ÙˆÙ†Ø©', et:'Ù„Ø­ÙˆÙ… ÙˆØ¯Ø¬Ø§Ø¬', kahvalti:'ÙØ·ÙˆØ±', meze:'Ù…Ù‚Ø¨Ù„Ø§Øª', dondur:'Ù…Ø¬Ù…Ù‘Ø¯Ø©', cocuk:'ÙˆØ¬Ø¨Ø§Øª Ø£Ø·ÙØ§Ù„', diyetvegf:'Ø­Ù…ÙŠØ©/Ù†Ø¨Ø§ØªÙŠ/Ø®Ø§Ù„Ù Ù…Ù† Ø§Ù„ØºÙ„ÙˆØªÙŠÙ†',
          yaspasta:'ÙƒÙŠÙƒ Ø¨Ø§Ù„ÙƒØ±ÙŠÙ…Ø©', kek:'ÙƒÙŠÙƒ ÙˆÙƒØ¨ ÙƒÙŠÙƒ', kurabiye:'Ø¨Ø³ÙƒÙˆÙŠØª', serbetli:'Ø­Ù„ÙˆÙŠØ§Øª Ù‚Ø·Ø±', sutlu:'Ø­Ù„ÙˆÙŠØ§Øª Ø¨Ø§Ù„Ø­Ù„ÙŠØ¨', cheese:'ØªØ´ÙŠØ²ÙƒÙŠÙƒ', diyettat:'Ø­Ù„ÙˆÙŠØ§Øª Ø­Ù…ÙŠØ©', cikolata:'Ø´ÙˆÙƒÙˆÙ„Ø§/Ø­Ù„ÙˆÙŠØ§Øª', dogumset:'Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
          recel:'Ù…Ø±Ø¨Ù‘Ù‰', pekmez:'Ø¯Ø¨Ø³', tursu:'Ù…Ø®Ù„Ù„Ø§Øª', dom:'ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù…/ÙÙ„ÙÙ„', acios:'ØµÙ„ØµØ© Ø­Ø§Ø±Ø©', salca:'Ù…Ø¹Ø¬ÙˆÙ†', sirke:'Ø®Ù„', konserve:'Ù…Ø¹Ù„Ù‘Ø¨Ø§Øª',
          eriste:'Ù†ÙˆØ¯Ù„Ø² (Ø¥Ø±ÙŠØ´ØªÙ‡)', tarhana:'ØªØ±Ø®Ø§Ù†Ø©', yufka:'ÙŠÙÙƒØ©', manti:'Ù…Ø§Ù†Ø·ÙŠ', kurut:'Ù…Ø¬ÙÙØ§Øª', salca2:'Ù…Ø¹Ø¬ÙˆÙ†', sirke2:'Ø®Ù„', konserve2:'Ù…Ø¹Ù„Ù‘Ø¨Ø§Øª',
          fit:'Ø£Ø·Ø¨Ø§Ù‚ Ø®ÙÙŠÙØ©', vegan:'Ø£Ø·Ø¨Ø§Ù‚ Ù†Ø¨Ø§ØªÙŠØ©', gf:'Ù…Ø®Ø¨ÙˆØ²Ø§Øª Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„ØºÙ„ÙˆØªÙŠÙ†', sekersiz:'Ø­Ù„ÙˆÙŠØ§Øª Ø¨Ø¯ÙˆÙ† Ø³ÙƒØ±', keto:'Ù…Ù†ØªØ¬Ø§Øª ÙƒÙŠØªÙˆ', protein:'Ø³Ù†Ø§ÙƒØ§Øª Ø¨Ø±ÙˆØªÙŠÙ†',
          bileklik:'Ø³ÙˆØ§Ø±', kolye:'Ø¹Ù‚Ø¯', kupe:'Ø£Ù‚Ø±Ø§Ø·', yuzuk:'Ø®Ø§ØªÙ…', halhal:'Ø®Ù„Ø®Ø§Ù„', bros:'Ø¨Ø±ÙˆØ´', set:'Ø·Ù‚Ù…', isimli:'Ù…Ø®ØµØµ Ø¨Ø§Ù„Ø§Ø³Ù…', makrome:'Ù…ÙƒØ±Ù…ÙŠØ©', dogaltas:'Ø£Ø­Ø¬Ø§Ø± Ø·Ø¨ÙŠØ¹ÙŠØ©', recine:'Ø±ÙŠØ²Ù†', telsarma:'Ø³Ù„Ùƒ Ù…Ø¬Ø¯ÙˆÙ„',
          fig:'Ù…Ø¬Ø³Ù‘Ù…Ø§Øª', cingirak:'Ø®Ø´Ø®ÙŠØ´Ø©', dis:'Ø¹Ø¶Ù‘Ø§Ø¶Ø©', bezoy:'Ù„Ø¹Ø¨Ø©/ÙƒØªØ§Ø¨ Ù‚Ù…Ø§Ø´ÙŠ', montessori:'Ù…ÙˆÙ†ØªÙŠØ³ÙˆØ±ÙŠ', set2:'Ø£Ø·Ù‚Ù…', patik:'Ø­Ø°Ø§Ø¡/Ù‚Ø¨Ø¹Ø©', battaniye:'Ø¨Ø·Ø§Ù†ÙŠØ©', onluk:'Ù…Ø±ÙŠÙ„Ø©', lohusa:'Ø·Ù‚Ù… Ù†ÙØ§Ø³', sac:'Ø¥ÙƒØ³Ø³ÙˆØ§Ø± Ø´Ø¹Ø±', giyim:'Ù…Ù„Ø§Ø¨Ø³ ÙŠØ¯ÙˆÙŠØ©',
          hirka:'ÙƒØ§Ø±Ø¯ÙŠØºØ§Ù†', kazak:'ÙƒÙ†Ø²Ø©', atkibere:'ÙˆØ´Ø§Ø­ ÙˆÙ‚Ø¨Ø¹Ø©', panco:'Ø¨ÙˆÙ†Ø´Ùˆ', sal:'Ø´Ø§Ù„', corap:'Ø¬ÙˆØ§Ø±Ø¨', lif:'Ø·Ù‚Ù… Ø§Ø³ØªØ­Ù…Ø§Ù…', bebektk:'Ø·Ù‚Ù… Ø·ÙÙ„', yelek:'ØµØ¯Ø±ÙŠØ©', kirlen:'ÙˆØ³Ø§Ø¯Ø©/ØºØ·Ø§Ø¡', igneoyasi:'Ø¯Ø§Ù†ØªÙŠÙ„Ø§ Ø¨Ø§Ù„Ø¥Ø¨Ø±Ø©',
          paca:'ØªÙ‚Ø±ÙŠØ¨/Ø¥ØµÙ„Ø§Ø­', fermuar:'ØªØºÙŠÙŠØ± Ø³Ø­Ø§Ø¨', perde:'Ø³ØªØ§Ø±Ø©', nevresim:'Ø·Ù‚Ù… Ù…ÙØ§Ø±Ø´', masa:'Ù…ÙØ±Ø´ Ø·Ø§ÙˆÙ„Ø©', ozel:'ØªÙØµÙŠÙ„ Ø®Ø§Øµ', kostum:'Ø²ÙŠ ØªÙ†ÙƒØ±ÙŠ',
          duvar:'ØªØ¹Ù„ÙŠÙ‚ Ø¬Ø¯Ø§Ø±ÙŠ', saksi:'Ø­Ø§Ù…Ù„ Ù†Ø¨Ø§ØªØ§Øª', anahtar:'Ù…ÙŠØ¯Ø§Ù„ÙŠØ© Ù…ÙØ§ØªÙŠØ­', avize:'Ø«Ø±ÙŠØ§', runner:'Ø±Ø§Ù†Ø±', sepet:'Ø³Ù„Ø©', raf:'Ø±Ù/Ø¯ÙŠÙƒÙˆØ±',
          kece:'Ø£Ø¹Ù…Ø§Ù„ Ù„Ø¨Ø§Ø¯', kirlent:'ÙˆØ³Ø§Ø¯Ø©', kapi:'Ø¥ÙƒÙ„ÙŠÙ„ Ø¨Ø§Ø¨', tepsi:'ØªØ²ÙŠÙŠÙ† ØµÙŠÙ†ÙŠØ©', cerceve:'Ø¥Ø·Ø§Ø±', ruya:'Ù…Ø§Ø³ÙÙƒ Ø£Ø­Ù„Ø§Ù…', tablo:'Ù„ÙˆØ­Ø©',
          soya:'Ø´Ù…Ø¹ ØµÙˆÙŠØ§/Ù†Ø­Ù„', tas:'Ø­Ø¬Ø± Ø¹Ø·Ø±ÙŠ', sprey:'Ù…Ø¹Ø·Ù‘Ø± ØºØ±Ù', tutsu:'Ø¨Ø®ÙˆØ±', jel:'Ø´Ù…Ø¹Ø© Ø¬Ù„', hediye:'Ø·Ù‚Ù… Ù‡Ø¯ÙŠØ©',
          zeytin:'ØµØ§Ø¨ÙˆÙ† Ø²ÙŠØª Ø²ÙŠØªÙˆÙ†', bitkisel:'ØµØ§Ø¨ÙˆÙ† Ø¹Ø´Ø¨ÙŠ', sampuan:'Ø´Ø§Ù…Ø¨Ùˆ ØµÙ„Ø¨', balm:'Ù…Ø±Ù‡ÙÙ… Ø´ÙØ§Ù‡', krem:'ÙƒØ±ÙŠÙ…/Ù…Ø±Ù‡Ù…', banyotuzu:'Ù…Ù„Ø­ Ø§Ø³ØªØ­Ù…Ø§Ù…', lavanta:'ÙƒÙŠØ³ Ù„Ø§ÙÙ†Ø¯Ø±',
          anahtar2:'Ù…ÙŠØ¯Ø§Ù„ÙŠØ© Ù…ÙØ§ØªÙŠØ­', magnet:'Ù…ØºÙ†Ø§Ø·ÙŠØ³', kolek:'Ù…Ø¬Ù…ÙˆØ¹Ø©', dekorbebek:'Ø¯Ù…ÙŠØ© Ø¯ÙŠÙƒÙˆØ±'
        }
      }
    };

    function applyI18n(lang){
      const dict = I18N[lang] || I18N.tr;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if (dict[key] != null){ el.innerHTML = dict[key]; }
      });
      // html lang & dir
      document.documentElement.lang = lang;
      document.documentElement.dir = (lang==='ar') ? 'rtl' : 'ltr';
      // Placeholders
      document.getElementById('li_email')?.setAttribute('placeholder', lang==='en'?'name@example.com':(lang==='de'?'name@beispiel.de':(lang==='ar'?'name@example.com':'ornek@mail.com')));
      document.getElementById('su_email')?.setAttribute('placeholder', lang==='en'?'name@example.com':(lang==='de'?'name@beispiel.de':(lang==='ar'?'name@example.com':'ornek@mail.com')));
      document.getElementById('su_username')?.setAttribute('placeholder', lang==='en'?'@username':(lang==='de'?'@benutzer':(lang==='ar'?'@username':'@kullanici')));
      document.getElementById('su_name')?.setAttribute('placeholder', lang==='en'?'Your full name':(lang==='de'?'VollstÃ¤ndiger Name':(lang==='ar'?'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„':'AdÄ±nÄ±z SoyadÄ±nÄ±z')));
      document.getElementById('su_district')?.setAttribute('placeholder', lang==='en'?'Your district':(lang==='de'?'Bezirk':(lang==='ar'?'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©':'Ä°lÃ§eniz')));
      // Kategorileri de yeniden kur
      buildTopCats(lang);
    }

    // YÄ±l
    document.getElementById('y').textContent = new Date().getFullYear();

    // TR Ä°ller
    const PROVINCES = ["Adana","AdÄ±yaman","Afyonkarahisar","AÄŸrÄ±","Aksaray","Amasya","Ankara","Antalya","Ardahan","Artvin","AydÄ±n","BalÄ±kesir","BartÄ±n","Batman","Bayburt","Bilecik","BingÃ¶l","Bitlis","Bolu","Burdur","Bursa","Ã‡anakkale","Ã‡ankÄ±rÄ±","Ã‡orum","Denizli","DiyarbakÄ±r","DÃ¼zce","Edirne","ElazÄ±ÄŸ","Erzincan","Erzurum","EskiÅŸehir","Gaziantep","Giresun","GÃ¼mÃ¼ÅŸhane","Hakkari","Hatay","IÄŸdÄ±r","Isparta","Ä°stanbul","Ä°zmir","KahramanmaraÅŸ","KarabÃ¼k","Karaman","Kars","Kastamonu","Kayseri","KÄ±rÄ±kkale","KÄ±rklareli","KÄ±rÅŸehir","Kilis","Kocaeli","Konya","KÃ¼tahya","Malatya","Manisa","Mardin","Mersin","MuÄŸla","MuÅŸ","NevÅŸehir","NiÄŸde","Ordu","Osmaniye","Rize","Sakarya","Samsun","Siirt","Sinop","Sivas","ÅanlÄ±urfa","ÅÄ±rnak","TekirdaÄŸ","Tokat","Trabzon","Tunceli","UÅŸak","Van","Yalova","Yozgat","Zonguldak"].sort((a,b)=>a.localeCompare(b,'tr'));
    const suProv = document.getElementById('su_province');
    if (suProv){ suProv.innerHTML = '<option value="" disabled selected>Ä°l seÃ§iniz</option>' + PROVINCES.map(p=>`<option value="${p}">${p}</option>`).join(''); }

    // Kategoriler â€“ id tabanlÄ± yapÄ± (mevcudu bozmadan)
    const CATS = [
      {id:'yemek', subs:[["evyemek"],["borek"],["corba"],["zeytiny"],["pilav"],["et"],["kahvalti"],["meze"],["dondur"],["cocuk"],["diyetvegf"]]},
      {id:'pasta', subs:[["yaspasta"],["kek"],["kurabiye"],["serbetli"],["sutlu"],["cheese"],["diyettat"],["cikolata"],["dogumset"]]},
      {id:'sos', subs:[["recel"],["pekmez"],["tursu"],["dom"],["acios"],["salca"],["sirke"],["konserve"]]},
      {id:'yoresel', subs:[["eriste"],["tarhana"],["yufka"],["manti"],["kurut"],["salca2"],["sirke2"],["konserve2"]]},
      {id:'diet', subs:[["fit"],["vegan"],["gf"],["sekersiz"],["keto"],["protein"]]},
      {id:'taki', subs:[["bileklik"],["kolye"],["kupe"],["yuzuk"],["halhal"],["bros"],["set"],["isimli"],["makrome"],["dogaltas"],["recine"],["telsarma"]]},
      {id:'bebek', subs:[["fig"],["cingirak"],["dis"],["bezoy"],["montessori"],["set2"],["patik"],["battaniye"],["onluk"],["lohusa"],["sac"],["giyim"]]},
      {id:'orgu', subs:[["hirka"],["kazak"],["atkibere"],["panco"],["sal"],["corap"],["lif"],["bebektk"],["yelek"],["kirlen"],["igneoyasi"]]},
      {id:'terzi', subs:[["paca"],["fermuar"],["perde"],["nevresim"],["masa"],["ozel"],["kostum"]]},
      {id:'makrome', subs:[["duvar"],["saksi"],["anahtar"],["avize"],["runner"],["sepet"],["raf"]]},
      {id:'evdekor', subs:[["kece"],["kirlent"],["kapi"],["tepsi"],["cerceve"],["ruya"],["tablo"]]},
      {id:'mum', subs:[["soya"],["tas"],["sprey"],["tutsu"],["jel"],["hediye"]]},
      {id:'kozmetik', subs:[["zeytin"],["bitkisel"],["sampuan"],["balm"],["krem"],["banyotuzu"],["lavanta"]]},
      {id:'amigurumi', subs:[["anahtar2"],["magnet"],["kolek"],["dekorbebek"]]},
    ];

    const catBar = document.querySelector('#catNav .catnav-inner');
    const drops = document.querySelector('#catDrops .catdrops-inner');

    function localizeCat(cat, lang){
      const L = CAT_I18N[lang] || CAT_I18N.tr;
      const title = L.titles[cat.id] || cat.id;
      const subs = cat.subs.map(([sid])=>[sid, (L.subs[sid]||sid)]);
      return { id: cat.id, title, subs };
    }

    function buildTopCats(lang){
      const currentLang = lang || (localStorage.getItem('ue_lang') || 'tr');
      catBar.innerHTML = '';
      drops.innerHTML = '';
      CATS.forEach((cat)=>{
        const LCat = localizeCat(cat, currentLang);
        const chip = document.createElement('button');
        chip.className = 'chip';
        chip.type = 'button';
        chip.textContent = LCat.title;
        chip.dataset.target = `p_${LCat.id}`;

        const panel = document.createElement('div');
        panel.className = 'panel';
        panel.id = `p_${LCat.id}`;
        panel.innerHTML = LCat.subs.map(([id,label])=>`<a href="#" data-open-auth style="display:inline-block;margin:4px 6px;padding:8px 10px;border-radius:8px;border:1px solid #eee">${label}</a>`).join('');
        panel.addEventListener('click',(e)=>{ if(e.target.matches('a[data-open-auth]')){ e.preventDefault(); openAuth(); }});

        chip.addEventListener('click',()=>{
          const wasOpen = panel.classList.contains('open');
          // Kapat tÃ¼m paneller ve aktif chipleri
          document.querySelectorAll('.catdrops .panel.open').forEach(p=>p.classList.remove('open'));
          document.querySelectorAll('#catNav .chip.active').forEach(c=>c.classList.remove('active'));
          if (!wasOpen){
            panel.classList.add('open');
            chip.classList.add('active');
          }
        });

        catBar.appendChild(chip);
        drops.appendChild(panel);
      });
    }

    buildTopCats(localStorage.getItem('ue_lang')||'tr');

    // Auth Modal helpers + gÃ¼venli aÃ§Ä±cÄ± (dialog destek yoksa fallback)
    const authModal = document.getElementById('authModal');
    function openAuth(){
      if (typeof authModal.showModal === 'function'){
        authModal.showModal();
      } else {
        authModal.setAttribute('open',''); // fallback
        authModal.style.display='grid';
      }
    }
    function closeAuth(){
      if (typeof authModal.close === 'function') authModal.close();
      authModal.removeAttribute('open');
      authModal.style.display='none';
    }
    document.querySelectorAll('#authModal [data-close]').forEach(b=>b.addEventListener('click',()=>{
      closeAuth();
    }));

    document.getElementById('signInBtn')?.addEventListener('click', openAuth);

    // Dil seÃ§ici
    const langSel = document.getElementById('langSel');
    langSel?.addEventListener('change', (e)=>{
      const v = e.target.value; applyI18n(v); localStorage.setItem('ue_lang', v);
    });
    applyI18n(localStorage.getItem('ue_lang')||'tr');

    // Password visibility toggles
    document.querySelectorAll('.toggle').forEach(b=>b.addEventListener('click',()=>{
      const id = b.getAttribute('data-toggle'); const inp = document.getElementById(id);
      if (inp) inp.type = inp.type === 'password' ? 'text' : 'password';
    }));

    // Firebase Auth
    const auth = getAuth();
    const provider = new GoogleAuthProvider();

    // === GÄ°RÄ°Å SONRASI YÃ–NLENDÄ°RME: /home.html ===
    function redirectHome(){ window.location.href = '/home.html'; }

    document.getElementById('googleBtn')?.addEventListener('click', async ()=>{
      try{ await signInWithPopup(auth, provider); redirectHome(); }
      catch(err){ alert('Google ile giriÅŸ baÅŸarÄ±sÄ±z: '+(err?.message||err)); }
    });

    document.getElementById('loginBtn')?.addEventListener('click', async ()=>{
      const email = document.getElementById('li_email').value.trim();
      const pass = document.getElementById('li_pass').value;
      if(!email || pass.length<6){ alert('Eâ€‘posta ve ÅŸifreyi kontrol edin.'); return; }
      try{ await signInWithEmailAndPassword(auth, email, pass); redirectHome(); }
      catch(err){ alert('GiriÅŸ baÅŸarÄ±sÄ±z: '+(err?.message||err)); }
    });

    document.getElementById('forgotBtn')?.addEventListener('click', async ()=>{
      const email = document.getElementById('li_email').value.trim();
      if(!email){ alert('Åifre sÄ±fÄ±rlamak iÃ§in eâ€‘posta girin.'); return; }
      try{ await sendPasswordResetEmail(auth, email); alert('Åifre sÄ±fÄ±rlama eâ€‘postasÄ± gÃ¶nderildi. Gelen kutusu ve SPAM klasÃ¶rÃ¼nÃ¼ kontrol edin.'); }
      catch(err){ alert('Ä°ÅŸlem baÅŸarÄ±sÄ±z: '+(err?.message||err)); }
    });

    document.getElementById('registerBtn')?.addEventListener('click', async ()=>{
      const username = document.getElementById('su_username').value.trim();
      const name = document.getElementById('su_name').value.trim();
      const province = document.getElementById('su_province').value;
      const district = document.getElementById('su_district').value.trim();
      const email = document.getElementById('su_email').value.trim();
      const pass = document.getElementById('su_pass').value;
      const pass2 = document.getElementById('su_pass2').value;
      if(!username || !name || !province || !district || !email || pass.length<6 || pass!==pass2){ alert('LÃ¼tfen tÃ¼m alanlarÄ± doÄŸru doldurun.'); return; }
      try{
        const cred = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(cred.user, { displayName: name });
        try{ await sendEmailVerification(cred.user); }catch{}
        alert('KayÄ±t tamamlandÄ±. DoÄŸrulama eâ€‘postasÄ± gÃ¶nderildi. SPAM klasÃ¶rÃ¼nÃ¼ de kontrol edin.');
        redirectHome();
      }catch(err){ alert('KayÄ±t baÅŸarÄ±sÄ±z: '+(err?.message||err)); }
    });

    onAuthStateChanged(auth, (u)=>{
      const authArea = document.getElementById('authArea');
      const signBtn = document.getElementById('signInBtn');
      if (u){
        authArea.style.display='flex'; signBtn.style.display='none';
        document.getElementById('uName').textContent = u.displayName || u.email || 'KullanÄ±cÄ±';
        document.getElementById('uAvatar').src = u.photoURL || '/assets/img/avatar-default.png';
      } else {
        authArea.style.display='none'; signBtn.style.display='inline-flex';
      }
    });

    document.getElementById('signOutBtn')?.addEventListener('click', async ()=>{ try{ await signOut(auth); }catch{} });

    // CTA â€“ bu iki buton giriÅŸ penceresini AÃ‡ACAK
    document.getElementById('browseBtn')?.addEventListener('click', openAuth);
    document.getElementById('postBtn')?.addEventListener('click', openAuth);
    </script>

  <script type="module">
    // === Ä°LANLARI Ã‡EK & GÃ–STER ===
    import { getFirestore, collection, getDocs, orderBy, query } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js';

    const db2 = (self.__fb?.db) || getFirestore();
    const grid = document.getElementById('listGrid');
    const info = document.getElementById('listInfo');
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');

    const PAGE_SIZE = 4; // her sayfada 4 ilan
    let allListings = [];
    let page = 0;

    function formatPrice(tryAmount){
      try{
        return new Intl.NumberFormat('tr-TR',{style:'currency',currency:'TRY',maximumFractionDigits:0}).format(tryAmount);
      }catch{ return tryAmount + ' TL'; }
    }

    function timeValid(d){
      try{ const ex = d?.toDate ? d.toDate() : (d instanceof Date ? d : new Date(d)); return ex >= new Date(); }catch{ return true; }
    }

    async function fetchSeller(uid){
      if(!uid) return null;
      try{
        const { getDoc, doc } = await import('https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js');
        const snap = await getDoc(doc(db2,'users',uid));
        return snap.exists()? snap.data(): null;
      }catch{ return null; }
    }

    function cardTpl(it){
      const img = (Array.isArray(it.photos) && it.photos[0]) ? it.photos[0] : '/assets/img/placeholder.png';
      const showcase = !!it.showcase;
      const price = (typeof it.price==='number')? formatPrice(it.price): '';
      const title = it.title || 'Ä°lan';
      const desc = it.description || '';
      const id = it.id;
      return `
        <article class="card" data-id="${id}">
          <div class="ph">
            ${showcase?'<span class="ribbon">Vitrin</span>':''}
            <img alt="${title}" loading="lazy" src="${img}">
          </div>
          <div class="body">
            <div class="title">${title}</div>
            <div class="desc">${desc}</div>
            <div class="seller" data-seller>
              <div class="av"><img alt="" src="/assets/img/avatar-default.png"></div>
              <div class="name">SatÄ±cÄ±</div>
              <span class="badge" style="display:none">OnaylÄ±</span>
            </div>
            <div class="price">${price}</div>
            <div class="actions">
              <button class="btn gold" data-do="order">SipariÅŸ Ver</button>
              <button class="btn ghost" data-do="msg">SatÄ±cÄ±ya Yaz</button>
            </div>
          </div>
        </article>`;
    }

    function render(){
      const start = page * PAGE_SIZE;
      const slice = allListings.slice(start, start + PAGE_SIZE);
      grid.innerHTML = slice.map(cardTpl).join('');
      info.textContent = `${allListings.length} ilanÄ±n ${start+1}-${Math.min(start+PAGE_SIZE, allListings.length)} arasÄ±`;
      prevBtn.disabled = page===0;
      nextBtn.disabled = (start + PAGE_SIZE) >= allListings.length;
    }

    function attachCardEvents(){
      grid.addEventListener('click', async (e)=>{
        const card = e.target.closest('.card');
        if(!card) return;
        const id = card.getAttribute('data-id');
        const listing = allListings.find(x=>x.id===id);
        if(!listing) return;

        if (e.target.matches('[data-do="order"], [data-do="msg"]')){
          // giriÅŸ panelini aÃ§
          openAuth();
          return;
        }
        // Kart tÄ±klanÄ±nca detay modal aÃ§
        openListingDetail(listing, card.querySelector('.ph img')?.src);
      });
    }

    async function openListingDetail(it, imgSrc){
      const modal = document.getElementById('listingModal');
      const body = document.getElementById('listingBody');
      let seller = null;
      // SatÄ±cÄ± bilgisi sellerId/ownerId alanlarÄ±ndan biri olabilir
      const sellerId = it.sellerId || it.ownerId || it.userId || it.uid;
      try{ seller = await fetchSeller(sellerId); }catch{}
      const av = seller?.photoURL || '/assets/img/avatar-default.png';
      const name = seller?.displayName || seller?.name || 'SatÄ±cÄ±';
      const verified = !!(seller?.verifiedSeller || seller?.verified);
      const price = (typeof it.price==='number')? formatPrice(it.price): '';

      body.innerHTML = `
        <div style="display:grid;gap:12px">
          <div style="border-radius:14px;overflow:hidden;border:1px solid #eee"><img src="${imgSrc}" alt="${it.title}" style="width:100%;height:auto;display:block"></div>
          <div style="display:flex;align-items:center;gap:10px">
            <div class="av" style="width:34px;height:34px"><img src="${av}" alt="${name}"></div>
            <div style="font-weight:700">${name}</div>
            ${verified?'<span class="badge">OnaylÄ±</span>':''}
          </div>
          <div>
            <div style="font-size:20px;font-weight:900">${it.title||''}</div>
            <div style="color:#6b7280;margin-top:6px">${it.description||''}</div>
          </div>
          <div style="font-size:18px;font-weight:900">${price}</div>
          <div style="display:flex;gap:8px">
            <button class="btn gold" id="detailOrder">SipariÅŸ Ver</button>
            <button class="btn ghost" id="detailMsg">SatÄ±cÄ±ya Yaz</button>
          </div>
        </div>`;

      document.getElementById('detailOrder')?.addEventListener('click', openAuth);
      document.getElementById('detailMsg')?.addEventListener('click', openAuth);

      if (typeof modal.showModal === 'function') modal.showModal();
      else { modal.setAttribute('open',''); modal.style.display='grid'; }
    }

    document.querySelector('[data-close-listing]')?.addEventListener('click',()=>{
      const modal = document.getElementById('listingModal');
      if (typeof modal.close === 'function') modal.close();
      modal.removeAttribute('open'); modal.style.display='none';
    });

    prevBtn.addEventListener('click',()=>{ if(page>0){ page--; render(); }});
    nextBtn.addEventListener('click',()=>{ if((page+1)*PAGE_SIZE < allListings.length){ page++; render(); }});

    async function loadListings(){
      try{
        info.textContent = 'YÃ¼kleniyorâ€¦';
        const col = collection(db2,'listings');
        const q = query(col, orderBy('updatedAt','desc'));
        const snap = await getDocs(q);
        const now = Date.now();
        const rows = [];
        snap.forEach(d=>{
          const data = d.data();
          // filtre: status approved, sÃ¼resi dolmamÄ±ÅŸ
          if (data?.status === 'approved'){
            const exp = data?.expiresAt?.toDate ? data.expiresAt.toDate().getTime() : (data?.expiresAt ? new Date(data.expiresAt).getTime() : now+1);
            if (exp >= now){ rows.push(Object.assign({id:d.id}, data)); }
          }
        });
        // Ã–ncelik: showcase true olanlar
        const showcase = rows.filter(r=>!!r.showcase);
        const standard = rows.filter(r=>!r.showcase);
        allListings = [...showcase, ...standard];
        page = 0;
        render();
        attachCardEvents();
      }catch(err){ info.textContent = 'Ä°lanlar yÃ¼klenemedi'; console.error(err); }
    }

    // FB hazÄ±r olduÄŸunda yÃ¼kle
    if (self.__fbReady) loadListings();
    else document.addEventListener('fb-ready', loadListings, { once:true });
  </script>
</body>
</html>  
